import{b as ae}from"./chunk-NT5FPG7D.js";import"./chunk-QVI53BAT.js";import"./chunk-WFPGVNJO.js";import"./chunk-KM57FXO5.js";import"./chunk-HC6MZPB3.js";import"./chunk-KBJHOUJC.js";import"./chunk-YMI2B6JE.js";import"./chunk-ES4PRHTQ.js";import"./chunk-FERD25SW.js";import"./chunk-HMTYJH34.js";import"./chunk-VFZRLGVJ.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import"./chunk-FUCWU6TH.js";import"./chunk-5BTC72NN.js";import"./chunk-MCRJI3T3.js";import"./chunk-MM5QLNJM.js";import"./chunk-XLMUYDS6.js";import"./chunk-72KDLSWN.js";import{e as I,m as ie,q as ne,t as oe,u as re}from"./chunk-MVKRSWIK.js";import{Aa as b,B as C,Ba as D,Gb as q,I as m,Ib as B,J as p,Mb as j,Na as V,Nb as L,Oa as O,Ob as N,Pb as G,Qb as U,S as c,Sa as A,Sb as H,T,Ub as Y,V as k,Xb as z,Y as y,Yb as K,Zb as J,_b as Q,aa as h,fa as o,fb as F,ga as t,ha as _,hb as R,ic as X,jc as Z,la as w,lc as $,ma as g,mc as ee,na as d,nb as W,pc as te,wa as a,xa as M,z as P,za as S}from"./chunk-AQGY4TKS.js";import"./chunk-A2PWH3LV.js";import"./chunk-7KGURMOZ.js";import"./chunk-2ERDAVOU.js";import"./chunk-S2UWYFTU.js";import"./chunk-7DVLVN3P.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g as x}from"./chunk-OLRFWS6T.js";var se=(()=>{let l=class l{constructor(i,e){this.firestore=i,this.auth=e}createServiceRequest(i){return x(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("User not logged in");let n={userId:e.uid,selectedProperty:i.selectedProperty,selectedExtras:i.selectedExtras,selectedTimeAndDate:i.selectedTimeAndDate,isAvailable:!0,cleanerID:"null",createdAt:ie.now()},f=re(this.firestore,"service-requests");try{let u=yield oe(f,n);return console.log("Service request successfully added with ID:",u.id),u.id}catch(u){throw console.error("Error adding service request:",u),new Error("Error adding service request: "+u)}})}};l.\u0275fac=function(e){return new(e||l)(C(ne),C(I))},l.\u0275prov=P({token:l,factory:l.\u0275fac,providedIn:"root"});let s=l;return s})();function pe(s,l){if(s&1&&(o(0,"div",2)(1,"h1"),a(2,"Let's get you started"),t(),o(3,"ion-item")(4,"ion-label"),a(5,"Details About Your Place"),t(),o(6,"ion-button",3),a(7,"Select"),t(),_(8,"ion-action-sheet",4),t()()),s&2){let r=d();c(8),h("buttons",r.actionSheetButtons)}}function he(s,l){if(s&1){let r=w();o(0,"ion-item"),_(1,"ion-icon",12),o(2,"ion-label"),a(3),t(),o(4,"ion-checkbox",13),D("ngModelChange",function(e){let n=m(r).$implicit;return b(n.selected,e)||(n.selected=e),p(e)}),g("ionChange",function(){let e=m(r).$implicit,n=d(2);return p(n.onCheckboxChange(e))}),t()()}if(s&2){let r=l.$implicit;c(),h("name",r.icon),c(2),M(r.name),c(),S("ngModel",r.selected)}}function ue(s,l){if(s&1){let r=w();o(0,"div",2)(1,"ion-card")(2,"ion-card-header")(3,"ion-card-title"),a(4,"Details About Your Clean"),t()(),o(5,"ion-card-content")(6,"p")(7,"strong"),a(8,"Location:"),t(),a(9," 27 Bosbok Avenue, Akasia"),t(),o(10,"ul")(11,"li"),a(12,"4 Bedrooms"),t(),o(13,"li"),a(14,"2 Bathrooms"),t(),o(15,"li"),a(16,"2 Living Rooms"),t(),o(17,"li"),a(18,"1 Kitchen"),t(),o(19,"li"),a(20,"2 Garages"),t()(),_(21,"ion-textarea",5),o(22,"p",6)(23,"strong"),a(24,"Note to developer:"),t(),a(25," This will not be stored in the backend but used to prepopulate the agreement page. "),t(),o(26,"ion-item",7),g("click",function(){m(r);let e=d();return p(e.openDateTimePicker())}),o(27,"ion-label"),a(28,"Choose Date & Time"),t(),_(29,"ion-icon",8),t(),o(30,"h3"),a(31,"Extras"),t(),o(32,"ion-list"),y(33,he,5,3,"ion-item",9),t(),o(34,"p",10),a(35,"GET 15% DISCOUNT FOR RECURRING BOOKINGS"),t(),o(36,"ion-button",11),g("click",function(){m(r);let e=d();return p(e.getCleaner())}),a(37," Lets Get Your Cleaner "),t()()()()}if(s&2){let r=d();c(33),h("ngForOf",r.extras)}}function ge(s,l){if(s&1){let r=w();o(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",14)(3,"ion-button",15),g("click",function(){m(r);let e=d();return p(e.closeDateTimePicker())}),a(4,"Cancel"),t()(),o(5,"ion-title"),a(6,"Date and Time"),t(),o(7,"ion-buttons",16)(8,"ion-button",17),g("click",function(){m(r);let e=d();return p(e.confirmSelection())}),a(9,"Confirm"),t()()()(),o(10,"ion-content",18)(11,"ion-datetime",19),D("ngModelChange",function(e){m(r);let n=d();return b(n.selectedDate_Time,e)||(n.selectedDate_Time=e),p(e)}),g("ionChange",function(e){m(r);let n=d();return p(n.validateTime(e))}),t()()}if(s&2){let r=d();c(8),h("strong",!0),c(3),S("ngModel",r.selectedDate_Time),h("isDateEnabled",r.isWeekday)("min",r.minDate)("max",r.maxDate)}}var ve=(()=>{let l=class l{constructor(i,e,n){this.toastController=i,this.serviceRequestService=e,this.auth=n,this.step=1,this.selectedDate_Time=null,this.showDateTimeModal=!1,this.isTimeValid=!0,this.restrictedStartTime="09:00",this.restrictedEndTime="17:00",this.extras=[{name:"Ironing",icon:"shirt-outline",selected:!1},{name:"Inside Fridge",icon:"snow-outline",selected:!1},{name:"Garage",icon:"car-outline",selected:!1},{name:"Inside Cabinets",icon:"briefcase-outline",selected:!1},{name:"Interior Windows",icon:"albums-outline",selected:!1},{name:"Interior Walls",icon:"business-outline",selected:!1},{name:"Laundry",icon:"water-outline",selected:!1}],this.actionSheetButtons=[{text:"House",handler:()=>{this.selectedProperty="House",this.step=2}},{text:"Apartment/Flat",handler:()=>{this.selectedProperty="Apartment/Flat",this.step=2}},{text:"Office",handler:()=>{this.selectedProperty="Office",this.step=2}}],this.isWeekday=le=>{let E=new Date(le).getUTCDay();return E!==0&&E!==6};let f=new Date,u=new Date;u.setDate(f.getDate()+1);let v=new Date;v.setMonth(f.getMonth()+1),this.minDate=u.toISOString().split("T")[0],this.maxDate=v.toISOString().split("T")[0]}ngOnInit(){}validateTime(i){let n=new Date(i.detail.value).toTimeString().split(" ")[0];n<this.restrictedStartTime||n>this.restrictedEndTime?(console.log("This time is restricted"),this.selectedDate_Time=null,this.isTimeValid=!1):this.isTimeValid=!0}openDateTimePicker(){this.showDateTimeModal=!0}closeDateTimePicker(){this.showDateTimeModal=!1}showToast(i){return x(this,null,function*(){(yield this.toastController.create({message:i,duration:2e3,position:"top",color:"danger"})).present()})}confirmSelection(){if(console.log("Selected Date:",this.selectedDate_Time),this.selectedDate_Time!=null){let e=new Date(this.selectedDate_Time).toTimeString().split(" ")[0];e<this.restrictedStartTime||e>this.restrictedEndTime?(console.log("Time is outside the allowed range"),this.showToast("Selected time is outside the allowed range! 09:00 - 17:00"),this.isTimeValid=!1):(this.isTimeValid=!0,this.showDateTimeModal=!1)}else this.showToast("Please select a valid date and time! 09:00 - 17:00")}onCheckboxChange(i){i.selected=!i.selected}getCleaner(){return x(this,null,function*(){var e;let i=this.extras.filter(n=>n.selected).map(n=>n.name).join(", ");try{let n=yield this.serviceRequestService.createServiceRequest({userId:(e=this.auth.currentUser)==null?void 0:e.uid,selectedProperty:this.selectedProperty,selectedExtras:i,selectedTimeAndDate:this.selectedDate_Time,createdAt:new Date});console.log("Service request created with ID:",n),(yield this.toastController.create({message:"A job post has been created, you will be notified as soon as it is accepted by a cleaner",duration:2e3,position:"top",color:"success"})).present()}catch(n){console.error("Error creating service request:",n)}})}};l.\u0275fac=function(e){return new(e||l)(T(ae),T(se),T(I))},l.\u0275cmp=k({type:l,selectors:[["app-property-information"]],decls:7,vars:3,consts:[["class","Property-container",4,"ngIf"],[3,"isOpen"],[1,"Property-container"],["id","open-action-sheet"],["trigger","open-action-sheet","header","Select property type...",3,"buttons"],["placeholder","Tell us any additional information..."],[1,"note"],["button","",3,"click"],["slot","end","name","calendar"],[4,"ngFor","ngForOf"],[1,"discount"],["expand","block","color","primary",3,"click"],["slot","start",3,"name"],["name","extraItem","slot","end",3,"ngModelChange","ionChange","ngModel"],["slot","start"],[3,"click"],["slot","end"],["expand","full",3,"click","strong"],[1,"ion-padding"],["name","selectedDateTime",3,"ngModelChange","ionChange","ngModel","isDateEnabled","min","max"]],template:function(e,n){e&1&&(o(0,"ion-header"),_(1,"ion-toolbar"),t(),o(2,"ion-content"),y(3,pe,9,1,"div",0)(4,ue,38,1,"div",0),t(),o(5,"ion-modal",1),y(6,ge,12,5,"ng-template"),t()),e&2&&(c(3),h("ngIf",n.step===1),c(),h("ngIf",n.step===2),c(),h("isOpen",n.showDateTimeModal))},dependencies:[$,q,B,J,K,Q,te,G,H,U,N,ee,j,L,Y,z,X,Z,A,V,O,W,F,R],styles:[".toast[_ngcontent-%COMP%]{background-color:red;color:#fff;font-weight:700}ion-button[_ngcontent-%COMP%]{margin:0 auto;font-size:.8rem;height:40px;text-align:center;font-style:normal;font-weight:700;font-size:15px;line-height:10px;--background: #1E232C;--color: White;--border-radius: 8px;--border-color: #000;--border-style: solid;--border-width: 1px;--box-shadow: 0 2px 6px 0 rgb(0, 0, 0, .25);--ripple-color: rgba(255, 20, 145, 0);--padding-top: 10px;--padding-bottom: 10px}ion-item[_ngcontent-%COMP%]{background:#1e1e1e00}"]});let s=l;return s})();export{ve as PropertyInformationPage};
