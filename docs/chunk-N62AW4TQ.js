import{c,d as h,e as l,g as d,i as p,j as m,k as n,l as w,m as f,r as g,s as y,x as v}from"./chunk-3RPTHWRS.js";import{C as o,z as u}from"./chunk-BCDJTGDW.js";import{g as a}from"./chunk-OLRFWS6T.js";var A=(()=>{let e=class e{constructor(){this.auth=o(l),this.firestore=o(f)}loginWithGoogle(){return a(this,null,function*(){let r=new h,t=yield n(this.auth,r);return t.user&&(yield this.saveUserData(t.user)),t})}loginWithApple(){return a(this,null,function*(){let r=new c("apple.com"),t=yield n(this.auth,r);return t.user&&(yield this.saveUserData(t.user)),t})}loginWithEmail(r,t){return a(this,null,function*(){try{let s=yield m(this.auth,r,t);return s.user&&(yield this.saveUserData(s.user)),s}catch(s){throw console.error("Error logging in with email and password:",s),s}})}sendPasswordResetEmail(r){return a(this,null,function*(){try{return yield p(this.auth,r),!0}catch(t){throw console.error("Error sending password reset email:",t),t}})}saveUserData(r){return a(this,null,function*(){let t=g(this.firestore,`users/${r.uid}`);(yield y(t)).exists()||(yield v(t,{uid:r.uid,displayName:r.displayName,email:r.email,photoURL:r.photoURL||"",createdAt:new Date}))})}logout(){return a(this,null,function*(){return w(this.auth)})}getCurrentUser(){return d(this.auth)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();export{A as a};
