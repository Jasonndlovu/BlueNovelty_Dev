import{a as K}from"./chunk-YCA6ITIU.js";import{a as Y}from"./chunk-3BWVIFHI.js";import"./chunk-6CACEU2V.js";import{F as G}from"./chunk-ZGICK3R3.js";import{H as $,I as z,i as R,j as B,k as M,l as N,m as V,n as J,o as q,q as L,t as H,z as U}from"./chunk-C2NQIB3Y.js";import{Aa as t,Ba as w,Ca as s,L as g,M as h,V as r,W as v,Xa as A,Y as T,Ya as j,aa as u,cb as F,ea as m,ib as P,ja as n,ka as e,kc as O,la as y,pa as S,qa as f,ra as p}from"./chunk-RFSKJ54S.js";import"./chunk-A2PWH3LV.js";import"./chunk-7KGURMOZ.js";import"./chunk-2ERDAVOU.js";import"./chunk-S2UWYFTU.js";import"./chunk-7DVLVN3P.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g as D}from"./chunk-OLRFWS6T.js";function Q(o,a){if(o&1){let i=S();n(0,"div",4)(1,"div",5)(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title"),t(5,"Note:"),e(),n(6,"ion-card-subtitle"),t(7,"Service agreement"),e()(),n(8,"ion-card-content"),t(9," Once you \u201CAccept\u201D this booking request, you will be scheduled for the clean. If you cannot make it, \u201CDecline.\u201D If you accept and then can\u2019t make it, when you are scheduled, then go to your profile, click on \u201CUpcoming Clean\u201D and on \u201CI Cannot Make It.\u201D Make sure to notify us atleast 12 Hours before your clean, otherwise penalties will be enforced. Do not be late. Do not miss a spot. Respect your client and we wish you luck. "),e(),n(10,"ion-button",6),f("click",function(){g(i);let d=p();return h(d.nextStep())}),t(11,"Continue"),e()()()()}}function W(o,a){if(o&1&&(n(0,"div",17)(1,"p")(2,"strong"),t(3,"Booking frequency:"),e(),t(4),e()()),o&2){let i=p(2);r(4),s(" ",i.bookingFrequency,"")}}function X(o,a){if(o&1&&(n(0,"div",17)(1,"p")(2,"strong"),t(3,"Booking day of the month:"),e(),t(4),e()()),o&2){let i=p(2);r(4),s(" ",i.recurringDate,"th")}}function Z(o,a){if(o&1&&(n(0,"div",17)(1,"p")(2,"strong"),t(3,"Every:"),e(),t(4),e()()),o&2){let i=p(2);r(4),s(" ",i.recurringDay,"")}}function ee(o,a){if(o&1&&(n(0,"li"),t(1),e()),o&2){let i=a.$implicit;r(),w(i)}}function te(o,a){if(o&1&&(n(0,"div")(1,"h3",12),t(2,"Extras"),e(),n(3,"ul",18),u(4,ee,2,1,"li",19),e()()),o&2){let i=p(2);r(4),m("ngForOf",i.jobItems)}}function ie(o,a){if(o&1){let i=S();n(0,"div",4)(1,"div",5)(2,"h2",7),t(3,"Details About Your Clean"),e(),n(4,"div",8)(5,"p")(6,"strong"),t(7,"Client Name:"),e(),t(8),e(),n(9,"p")(10,"strong"),t(11,"Service:"),e(),t(12),e(),n(13,"p")(14,"strong"),t(15,"Preferred Date:"),e(),t(16),e(),n(17,"p")(18,"strong"),t(19,"Offered Rate:"),e(),t(20),e()(),n(21,"div",9)(22,"p")(23,"strong"),t(24,"Location:"),e(),t(25),e()(),n(26,"div",9)(27,"p")(28,"strong"),t(29,"Booking Type:"),e(),t(30),e()(),u(31,W,5,1,"div",10)(32,X,5,1,"div",10)(33,Z,5,1,"div",10),n(34,"div",9)(35,"p")(36,"strong"),t(37,"Scheduled Date:"),e(),t(38),e(),n(39,"p")(40,"strong"),t(41,"Scheduled Time:"),e(),t(42),e()(),u(43,te,5,1,"div",11),n(44,"div")(45,"h3",12),t(46,"Additional Instructions"),e(),n(47,"p",13),t(48),e()(),n(49,"div",14)(50,"button",15),f("click",function(){g(i);let d=p();return h(d.confirmAcceptJob())}),t(51," Accept "),e(),n(52,"button",16),f("click",function(){g(i);let d=p();return h(d.backtoDash())}),t(53," Decline "),e()()()()}if(o&2){let i=p();r(8),s(" ",i.userName,""),r(4),s(" ",i.jobType,""),r(4),s(" ",i.scheduledDate,""),r(4),s(" R",i.price,""),r(5),s(" ","Randpark, Randburg",""),r(5),s(" ",i.bookingType,""),r(),m("ngIf",i.bookingType==="Re-occurring"&&i.bookingFrequency),r(),m("ngIf",i.bookingType==="Re-occurring"&&i.recurringDate),r(),m("ngIf",i.bookingType==="Re-occurring"&&i.recurringDay),r(5),s(" ",i.scheduledDateOnly,""),r(4),s(" ",i.scheduledTimeOnly,""),r(),m("ngIf",i.jobItems==null?null:i.jobItems.length),r(5),s(" ",i.additionalInfo," ")}}var he=(()=>{let a=class a{constructor(l,d,x){var E,k;this.router=l,this.availableJobsService=d,this.auth=x,this.step=1,this.user=null,this.editMode=!1,this.role="user";let b=this.router.getCurrentNavigation(),c=(E=b==null?void 0:b.extras)==null?void 0:E.state;if(c){console.log(c);let C=c.toDo;if(this.jobItems=C?C.split(",").map(I=>I.trim()):[],this.jobId=c.jobId,this.jobType=c.jobType,this.userId=c.userId,this.userName=c.userName,this.price=c.price,this.additionalInfo=c.additionalInfo,this.bookingType=c.jobBookingType,this.scheduledDate=c.scheduledDate,this.bookingFrequency=c.bookingFrequency,this.recurringDay=c.recurringDay,this.recurringDate=(k=c.recurringDate)==null?void 0:k.toString(),this.scheduledDate){let[I,_]=this.scheduledDate.split("T");this.scheduledDateOnly=I,this.scheduledTimeOnly=_==null?void 0:_.slice(0,5)}}}ngOnInit(){console.log(this.jobItems),this.auth.onAuthStateChanged(l=>D(this,null,function*(){this.user=l}))}confirmAcceptJob(){!this.jobId||!this.user||this.availableJobsService.updateJobStatus(this.jobId,this.user).then(()=>{console.log(`Job ${this.jobId} has been accepted.`),this.router.navigate(["/dashboard"])}).catch(l=>{console.error("Error updating job status:",l)})}backtoDash(){this.router.navigate(["/dashboard"])}nextStep(){this.step+=1}capitalizeFirstLetter(l){return l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()}};a.\u0275fac=function(d){return new(d||a)(v(P),v(K),v(G))},a.\u0275cmp=T({type:a,selectors:[["app-accept-service"]],decls:10,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["class","p-4",4,"ngIf"],[1,"p-4"],[1,"bg-white","rounded-2xl","shadow-md","p-6","space-y-6"],["fill","clear",3,"click"],[1,"text-center","text-xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-700","space-y-1"],[1,"text-sm","text-gray-700"],["class","text-sm text-red-700",4,"ngIf"],[4,"ngIf"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-blue-700"],[1,"flex","gap-4"],[1,"w-full","bg-green-600","hover:bg-green-700","text-white","font-medium","py-3","rounded-lg","text-sm","shadow","transition",3,"click"],[1,"w-full","bg-red-600","hover:bg-red-700","text-white","font-medium","py-3","rounded-lg","text-sm","shadow","transition",3,"click"],[1,"text-sm","text-red-700"],[1,"list-disc","list-inside","text-sm","text-gray-700","space-y-1"],[4,"ngFor","ngForOf"]],template:function(d,x){d&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),y(3,"ion-menu-button"),e(),n(4,"ion-title"),t(5,"acceptService"),e()()(),n(6,"ion-content",2),y(7,"app-global-background"),u(8,Q,12,0,"div",3)(9,ie,54,13,"div",3),e()),d&2&&(m("translucent",!0),r(6),m("fullscreen",!0),r(2),m("ngIf",x.step===1),r(),m("ngIf",x.step===2))},dependencies:[N,J,q,V,M,R,B,L,H,$,U,z,F,A,j,O,Y],encapsulation:2});let o=a;return o})();export{he as AcceptServicePage};
