import{a as F1}from"./chunk-76NDO23B.js";import{a as D1}from"./chunk-B2FOGW6Z.js";import{a as P1}from"./chunk-RFC543RR.js";import{a as q1}from"./chunk-GJRON2FT.js";import{g as O1,p as b1}from"./chunk-L2HEO6U7.js";import{F as y1,H as S1,L as j1,y as V1,z as A1}from"./chunk-JYJCGWMW.js";import{D as L1,H as H1,J as C1,a as u1,d as M1,f as z1,q as k1,u as f1,y as B1}from"./chunk-RADV76JZ.js";import{B as q,Bc as m1,D as K,E as P,Fa as H,H as Q,P as Y,Qa as _,R as o1,T as D,U as s1,V as w,W as M,Wa as e1,Y as a1,aa as t1,ab as c1,b as N,ba as i1,bb as I,ca as F,cb as r1,db as v1,ea as z,fb as g1,ga as c,gb as w1,ha as r,hb as h1,ia as E,ib as p1,j as W,jb as d1,k as m,kb as x1,l as G,n as p,na as y,o as X,p as j,q as O,r as b,ra as n1,s as u,t as B,v as d,w as Z,x as $,xa as v,y as L,ya as l1,z as J}from"./chunk-KV6L2PIJ.js";import"./chunk-A2PWH3LV.js";import"./chunk-2ERDAVOU.js";import"./chunk-S2UWYFTU.js";import"./chunk-7DVLVN3P.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as A,e as f,g as S}from"./chunk-OLRFWS6T.js";var E1=[{path:"",redirectTo:"landing",pathMatch:"full"},{path:"folder/:id",loadComponent:()=>import("./chunk-2QXZ4AJG.js").then(o=>o.FolderPage)},{path:"onboarding",loadComponent:()=>import("./chunk-IQ4B2EK5.js").then(o=>o.OnboardingPage)},{path:"messenger",loadComponent:()=>import("./chunk-U54ZTJEJ.js").then(o=>o.MessengerPage)},{path:"chat/:chatId",loadComponent:()=>import("./chunk-LKBHWLSK.js").then(o=>o.ChatPage)},{path:"profile",loadComponent:()=>import("./chunk-WKW7GIS4.js").then(o=>o.ProfilePage)},{path:"login",loadComponent:()=>import("./chunk-7PJ644EZ.js").then(o=>o.LoginPage)},{path:"users",loadComponent:()=>import("./chunk-KIZMBON5.js").then(o=>o.UsersListPage)},{path:"sign-up",loadComponent:()=>import("./chunk-C7VXTVZ6.js").then(o=>o.SignUpPage)},{path:"profile-settings",loadComponent:()=>import("./chunk-U43SHJDE.js").then(o=>o.ProfileSettingPage)},{path:"card",loadComponent:()=>import("./chunk-FCXLJXOB.js").then(o=>o.CardPage)},{path:"dashboard",loadComponent:()=>import("./chunk-V5N7O5FS.js").then(o=>o.DashboardPage)},{path:"reviews",loadComponent:()=>import("./chunk-RND5UIGQ.js").then(o=>o.ReviewsPage)},{path:"property-information",loadComponent:()=>import("./chunk-GBRCXV66.js").then(o=>o.PropertyInformationPage)},{path:"available-jobs",loadComponent:()=>import("./chunk-VKTE3BPN.js").then(o=>o.AvailableJobsPage)},{path:"accept-service",loadComponent:()=>import("./chunk-L7RMC4AR.js").then(o=>o.AcceptServicePage)},{path:"accept-job",loadComponent:()=>import("./chunk-ADQB3J2U.js").then(o=>o.AcceptJobPage)},{path:"cleaner-profile",loadComponent:()=>import("./chunk-Z66FH4KM.js").then(o=>o.CleanerProfilePage)},{path:"user-profile",loadComponent:()=>import("./chunk-2FPGLX2D.js").then(o=>o.UserProfilePage)},{path:"add-property-type",loadComponent:()=>import("./chunk-B7ORWU2Q.js").then(o=>o.AddPropertyTypePage)},{path:"add-user-property",loadComponent:()=>import("./chunk-QV5A6QB5.js").then(o=>o.AddUserPropertyPage)},{path:"landing",loadComponent:()=>import("./chunk-NNF7LWBD.js").then(o=>o.LandingPage)},{path:"upcoming-jobs",loadComponent:()=>import("./chunk-MJR55WPH.js").then(o=>o.UpcomingJobsPage)},{path:"view-service",loadComponent:()=>import("./chunk-DQMGE7TJ.js").then(o=>o.ViewtServicePage)},{path:"service-history",loadComponent:()=>import("./chunk-JOBB3KAS.js").then(o=>o.ServiceHistoryPage)},{path:"find-cleaner",loadComponent:()=>import("./chunk-QQQPJS25.js").then(o=>o.FindCleanerPage)}];var T,t2=function(){if(typeof window>"u")return new Map;if(!T){var o=window;o.Ionicons=o.Ionicons||{},T=o.Ionicons.map=o.Ionicons.map||new Map}return T},R=function(o){Object.keys(o).forEach(function(s){_1(s,o[s]);var n=s.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();s!==n&&_1(n,o[s])})},_1=function(o,s){var n=t2(),a=n.get(o);a===void 0?n.set(o,s):a!==s&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(o,'". Ensure that multiple icons are not mapped to the same icon name.'))};var I1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M80 152v256a40.12 40.12 0 0040 40h272a40.12 40.12 0 0040-40V152' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><rect x='48' y='64' width='416' height='80' rx='28' ry='28' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M320 304l-64 64-64-64M256 345.89V224' class='ionicon-fill-none ionicon-stroke-width'/></svg>",T1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='32' y='48' width='448' height='80' rx='12' ry='12'/><path d='M64 160v280a24 24 0 0024 24h336a24 24 0 0024-24V160zm192 230.63L169.32 304 192 281.32l48 48.05V208h32v121.37l48.07-48.07 22.61 22.64z'/></svg>";var R1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M352 48H160a48 48 0 00-48 48v368l144-128 144 128V96a48 48 0 00-48-48z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",U1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M416 480L256 357.41 96 480V32h320z'/></svg>";var N1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M352.92 80C288 80 256 144 256 144s-32-64-96.92-64c-52.76 0-94.54 44.14-95.08 96.81-1.1 109.33 86.73 187.08 183 252.42a16 16 0 0018 0c96.26-65.34 184.09-143.09 183-252.42-.54-52.67-42.32-96.81-95.08-96.81z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",W1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 448l-9-6c-42.78-28.57-96.91-60.86-137-108.32-42.25-50-62.52-101.35-62-157C48.63 114.54 98.46 64 159.08 64c48.11 0 80.1 28 96.92 48.21C272.82 92 304.81 64 352.92 64c60.62 0 110.45 50.54 111.08 112.65.56 55.68-19.71 107-62 157-40.09 47.49-94.22 79.78-137 108.35z'/></svg>";var G1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='48' y='96' width='416' height='320' rx='40' ry='40' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M112 160l144 112 144-112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",X1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 80H48a16 16 0 00-16 16v320a16 16 0 0016 16h416a16 16 0 0016-16V96a16 16 0 00-16-16zM265.82 284.63a16 16 0 01-19.64 0L89.55 162.81l19.64-25.26L256 251.73l146.81-114.18 19.64 25.26z'/></svg>";var Z1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M53.12 199.94l400-151.39a8 8 0 0110.33 10.33l-151.39 400a8 8 0 01-15-.34l-67.4-166.09a16 16 0 00-10.11-10.11L53.46 215a8 8 0 01-.34-15.06zM460 52L227 285' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",$1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M496 16L15.88 208 195 289 448 64 223 317l81 179L496 16z'/></svg>";var J1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-miterlimit='10' d='M80 112h352' class='ionicon-stroke-width'/><path d='M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",K1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M296 64h-80a7.91 7.91 0 00-8 8v24h96V72a7.91 7.91 0 00-8-8z' class='ionicon-fill-none'/><path d='M292 64h-72a4 4 0 00-4 4v28h80V68a4 4 0 00-4-4z' class='ionicon-fill-none'/><path d='M447.55 96H336V48a16 16 0 00-16-16H192a16 16 0 00-16 16v48H64.45L64 136h33l20.09 314A32 32 0 00149 480h214a32 32 0 0031.93-29.95L415 136h33zM176 416l-9-256h33l9 256zm96 0h-32V160h32zm24-320h-80V68a4 4 0 014-4h72a4 4 0 014 4zm40 320h-33l9-256h33z'/></svg>";var Q1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M85.57 446.25h340.86a32 32 0 0028.17-47.17L284.18 82.58c-12.09-22.44-44.27-22.44-56.36 0L57.4 399.08a32 32 0 0028.17 47.17z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M250.26 195.39l5.74 122 5.73-121.95a5.74 5.74 0 00-5.79-6h0a5.74 5.74 0 00-5.68 5.95z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 397.25a20 20 0 1120-20 20 20 0 01-20 20z'/></svg>",Y1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M479 447.77L268.43 56.64a8 8 0 00-14.09 0L43.73 447.77a8 8 0 007.05 11.79H472a8 8 0 007-11.79zm-197.62-36.29h-40v-40h40zm-4-63.92h-32l-6-160h44z'/></svg>";var n2=()=>["/upcoming-jobs"],l2=()=>["/messenger"],e2=()=>["/service-history"],c2=()=>["/available-jobs"];function r2(o,s){o&1&&(c(0,"div",12)(1,"ion-item",13),v(2,"Offers"),r()()),o&2&&(w(),z("routerLink",H(1,c2)))}var o2=(()=>{let s=class s{constructor(a,t,i,e,l){this.router=a,this.auth=t,this.userService=i,this.authService=e,this.chatService=l,this.user=null,this.userRole=null,this.appPages=[{title:"Dashboard",url:"/dashboard",icon:"trash"},{title:"Available Jobs",url:"/available-jobs",icon:"paper-plane"},{title:"Messages",url:"/messenger",icon:"mail"},{title:"Service History",url:"/service-history",icon:"archive"},{title:"Upcoming jobs",url:"/upcoming-jobs",icon:"warning"}],this.labels=["Family","Friends","Notes","Work","Travel","Reminders"],this.unreadCount$=m(0),this.numberOfMessages=2,R({mailOutline:G1,mailSharp:X1,paperPlaneOutline:Z1,paperPlaneSharp:$1,heartOutline:N1,heartSharp:W1,archiveOutline:I1,archiveSharp:T1,trashOutline:J1,trashSharp:K1,warningOutline:Q1,warningSharp:Y1,bookmarkOutline:R1,bookmarkSharp:U1})}ngOnInit(){this.auth.onAuthStateChanged(a=>{a?(this.user=a,this.fetchUserDetails().then(()=>{console.log("Full user details:",this.user)})):console.log("No user is logged in.")})}closeMenu(){var a;(a=document.querySelector("ion-menu"))==null||a.close()}logout(){return S(this,null,function*(){yield this.authService.logout(),this.router.navigate(["/login"])})}navigateSettings(){this.router.navigate(["/profile"])}fetchUserDetails(){return S(this,null,function*(){return new Promise(a=>{this.authService.getCurrentUser().subscribe(t=>{this.user=t,console.log("Auth User:",t),t!=null&&t.uid?this.userService.getUserById(t.uid).subscribe(i=>{var e;console.log("Firestore User:",i),this.user=A({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL},i),this.userRole=(e=i==null?void 0:i.role)!=null?e:null,a()}):a()})})})}};s.\u0275fac=function(t){return new(t||s)(M(w1),M(y1),M(D1),M(q1),M(P1))},s.\u0275cmp=a1({type:s,selectors:[["app-root"]],decls:33,vars:9,consts:[["contentId","main-content"],["contentId","main-content","type","overlay"],[1,"flex","flex-col","items-start","bg-white","rounded-xl","shadow-lg","p-4","m-4"],[1,"w-full","flex","justify-between","items-center","pl-4"],[1,"w-8","h-8","bg-blue-600","rounded-full","flex","items-center","justify-center","text-xs","font-bold"],["name","close",1,"text-2xl","text-black","cursor-pointer",3,"click"],[1,"flex","items-center","mb-4","p-4"],["alt","Profile",1,"rounded-full","w-10","h-10","mr-3",3,"src"],[1,"text-sm","font-semibold"],[1,"text-xs","cursor-pointer","text-gray-500",3,"click"],[1,"w-full","space-y-6","p-4"],["class","text-base font-medium cursor-pointer hover:text-blue-600",4,"ngIf"],[1,"text-base","font-medium","cursor-pointer","hover:text-blue-600"],["lines","none",3,"routerLink"],[1,"text-base","font-medium","cursor-pointer","hover:text-blue-600","relative"],[1,"absolute","top-0","right-0","transform","bg-red-500","text-white","text-xs","rounded-full","px-1"],[1,"text-base","font-medium","cursor-pointer","hover:text-red-500"],["lines","none",3,"click"],["id","main-content"]],template:function(t,i){t&1&&(c(0,"ion-app")(1,"ion-split-pane",0)(2,"ion-menu",1)(3,"ion-content",2)(4,"div",3)(5,"div",4),v(6," B "),r(),c(7,"ion-icon",5),y("click",function(){return i.closeMenu()}),v(8," X "),r()(),c(9,"div",6),E(10,"img",7),c(11,"div")(12,"div",8),v(13),r(),c(14,"div",9),y("click",function(){return i.navigateSettings()}),v(15,"Edit Profile"),r()()(),c(16,"div",10),t1(17,r2,3,2,"div",11),c(18,"div",12)(19,"ion-item",13),v(20,"Alerts"),r()(),c(21,"div",14)(22,"ion-item",13),v(23," Messages "),c(24,"span",15),v(25,"5 "),r()()(),c(26,"div",12)(27,"ion-item",13),v(28,"Service History"),r()(),c(29,"div",16)(30,"ion-item",17),y("click",function(){return i.logout()}),v(31,"Log out"),r()()()()(),E(32,"ion-router-outlet",18),r()()),t&2&&(w(10),n1("src",i.user==null?null:i.user.photoURL,s1),w(3),l1((i.user==null?null:i.user.displayName)||"Guest"),w(4),z("ngIf",i.userRole==="service-provider"),w(2),z("routerLink",H(6,n2)),w(3),z("routerLink",H(7,l2)),w(5),z("routerLink",H(8,e2)))},dependencies:[c1,e1,C1,h1,z1,L1,B1,k1,f1,M1,u1],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-item-background, var(--ion-background-color));--border-top-left-radius: 300px;--border-radius: 300px}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start: 8px;--padding-end: 8px;--padding-top: 20px;--padding-bottom: 20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom: 20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color: var(--ion-color-primary)}"]});let o=s;return o})();var V="Service workers are disabled or not supported by this browser";function v2(o){return j(()=>G(new Error(o)))}var k=class{serviceWorker;worker;registration;events;constructor(s){if(this.serviceWorker=s,!s)this.worker=this.events=this.registration=v2(V);else{let a=O(s,"controllerchange").pipe(p(()=>s.controller)),t=j(()=>m(s.controller)),i=X(t,a);this.worker=i.pipe(B(x=>!!x)),this.registration=this.worker.pipe(L(()=>s.getRegistration()));let g=O(s,"message").pipe(p(x=>x.data)).pipe(B(x=>x&&x.type)).pipe($());g.connect(),this.events=g}}postMessage(s,n){return this.worker.pipe(d(1),J(a=>{a.postMessage(A({action:s},n))})).toPromise().then(()=>{})}postMessageWithOperation(s,n,a){let t=this.waitForOperationCompleted(a),i=this.postMessage(s,n);return Promise.all([i,t]).then(([,e])=>e)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(s){let n;return typeof s=="string"?n=a=>a.type===s:n=a=>s.includes(a.type),this.events.pipe(B(n))}nextEventOfType(s){return this.eventsOfType(s).pipe(d(1))}waitForOperationCompleted(s){return this.eventsOfType("OPERATION_COMPLETED").pipe(B(n=>n.nonce===s),d(1),p(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},g2=(()=>{let s=class s{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new N;constructor(a){if(this.sw=a,!a.isEnabled){this.messages=u,this.notificationClicks=u,this.subscription=u;return}this.messages=this.sw.eventsOfType("PUSH").pipe(p(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(p(i=>i.data)),this.pushManager=this.sw.registration.pipe(p(i=>i.pushManager));let t=this.pushManager.pipe(L(i=>i.getSubscription()));this.subscription=b(t,this.subscriptionChanges)}requestSubscription(a){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(V));let t={userVisibleOnly:!0},i=this.decodeBase64(a.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),e=new Uint8Array(new ArrayBuffer(i.length));for(let l=0;l<i.length;l++)e[l]=i.charCodeAt(l);return t.applicationServerKey=e,this.pushManager.pipe(L(l=>l.subscribe(t)),d(1)).toPromise().then(l=>(this.subscriptionChanges.next(l),l))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(V));let a=t=>{if(t===null)throw new Error("Not subscribed to push notifications.");return t.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(d(1),L(a)).toPromise()}decodeBase64(a){return atob(a)}};f(s,"\u0275fac",function(t){return new(t||s)(P(k))}),f(s,"\u0275prov",q({token:s,factory:s.\u0275fac}));let o=s;return o})(),w2=(()=>{let s=class s{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(a){if(this.sw=a,!a.isEnabled){this.versionUpdates=u,this.unrecoverable=u;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(V));let a=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:a},a)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(V));let a=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:a},a)}};f(s,"\u0275fac",function(t){return new(t||s)(P(k))}),f(s,"\u0275prov",q({token:s,factory:s.\u0275fac}));let o=s;return o})();var s2=new K("");function h2(o,s,n,a){return()=>{if(!(I(a)&&"serviceWorker"in navigator&&n.enabled!==!1))return;let t=o.get(o1),i=o.get(F);t.runOutsideAngular(()=>{let l=navigator.serviceWorker,h=()=>{var g;return(g=l.controller)==null?void 0:g.postMessage({action:"INITIALIZE"})};l.addEventListener("controllerchange",h),i.onDestroy(()=>{l.removeEventListener("controllerchange",h)})});let e;if(typeof n.registrationStrategy=="function")e=n.registrationStrategy();else{let[l,...h]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":e=m(null);break;case"registerWithDelay":e=a2(+h[0]||0);break;case"registerWhenStable":let g=W(o.get(F).whenStable());e=h[0]?b(g,a2(+h[0])):g;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.runOutsideAngular(()=>e.pipe(d(1)).subscribe(()=>navigator.serviceWorker.register(s,{scope:n.scope}).catch(l=>console.error("Service worker registration failed with:",l))))}}function a2(o){return m(null).pipe(Z(o))}function p2(o,s){return new k(I(s)&&o.enabled!==!1?navigator.serviceWorker:void 0)}var C=class{enabled;scope;registrationStrategy};function U(o,s={}){return Q([g2,w2,{provide:s2,useValue:o},{provide:C,useValue:s},{provide:k,useFactory:p2,deps:[C,D]},{provide:i1,useFactory:h2,deps:[Y,s2,C,D],multi:!0}])}v1(o2,{providers:[r1(),V1(()=>A1(F1.firebaseConfig)),S1(()=>j1()),O1(()=>b1()),{provide:g1,useClass:m1},H1(),d1(E1,x1(p1)),U("ngsw-worker.js",{enabled:!_(),registrationStrategy:"registerWhenStable:30000"}),U("ngsw-worker.js",{enabled:!_(),registrationStrategy:"registerWhenStable:30000"})]}).catch(o=>console.error(o));
