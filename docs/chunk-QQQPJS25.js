import{a as F}from"./chunk-A6AJQXTM.js";import{a as E}from"./chunk-XWTMKH22.js";import"./chunk-L2HEO6U7.js";import{F as S}from"./chunk-JYJCGWMW.js";import{I as O,J as I,i as M}from"./chunk-RADV76JZ.js";import{U as x,V as s,W as d,Wa as w,Y as b,aa as h,ab as _,ea as p,eb as P,ga as e,ha as n,ia as c,ic as y,oa as u,ra as C,xa as i,ya as v,za as f}from"./chunk-KV6L2PIJ.js";import"./chunk-A2PWH3LV.js";import"./chunk-2ERDAVOU.js";import"./chunk-S2UWYFTU.js";import"./chunk-7DVLVN3P.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g}from"./chunk-OLRFWS6T.js";function T(r,l){if(r&1&&(e(0,"div",2),c(1,"ion-icon",3),e(2,"p",4),i(3),n(),e(4,"h2",5),i(5,"We're Finding Your Cleaner..."),n(),e(6,"div",6),c(7,"img",7),n(),e(8,"p",8),i(9," Do not exit or close this app until we have allocated you a cleaner. "),n(),e(10,"p",9),i(11,"Almost There!"),n(),e(12,"div",10),c(13,"div",11)(14,"div",12)(15,"div",13),n()()),r&2){let a=u();s(3),f("Hi, ",a.user==null?null:a.user.displayName,"")}}function k(r,l){if(r&1&&(e(0,"div",2),c(1,"ion-icon",3),e(2,"p",4),i(3),n(),e(4,"h2",14),i(5,"We Found You A Cleaner..."),n(),c(6,"img",15),e(7,"h3",16),i(8),n(),e(9,"p",17),i(10,"\u2B50 4.9 "),e(11,"span",18),i(12,"(90 reviews)"),n()(),e(13,"p",19),i(14," Click \u201CProceed\u201D below and your booking will be secured "),n(),e(15,"ion-button",20),i(16," Proceed "),n()()),r&2){let a=u();s(3),f("Hi, ",a.user==null?null:a.user.displayName,""),s(3),C("src",a.cleaner==null?null:a.cleaner.photoURL,x),s(2),v(a.cleaner==null?null:a.cleaner.displayName)}}var J=(()=>{let l=class l{constructor(t,o,m,j){this.auth=t,this.serviceRequestService=o,this.toastController=m,this.route=j,this.cleanerFound=!1,this.cleaner=null,this.user=null,this.latestServiceRequestId=""}ngOnInit(){this.route.queryParams.subscribe(t=>{let o=t.serviceID;o&&(this.latestServiceRequestId=o,console.log("Listening for service ID:",o))}),this.auth.onAuthStateChanged(t=>g(this,null,function*(){t?(this.user=t,this.latestServiceRequestId&&this.listenForCleanerAssignment()):console.log("No user is logged in.")}))}listenForCleanerAssignment(){this.serviceRequestService.waitForCleanerAssignment(this.latestServiceRequestId).then(t=>{this.cleaner=t,console.log(this.cleaner),this.cleanerFound=!0,this.showToast(`Cleaner found: ${t.fullName||"Name not available"}`)}).catch(t=>{console.error("Error detecting cleaner assignment:",t)})}showToast(t){return g(this,null,function*(){(yield this.toastController.create({message:t,duration:2e3,position:"top",color:"success"})).present()})}};l.\u0275fac=function(o){return new(o||l)(d(S),d(F),d(O),d(P))},l.\u0275cmp=b({type:l,selectors:[["app-find-cleaner"]],decls:4,vars:2,consts:[[1,"flex","items-center","justify-center","h-full","p-4"],["class","bg-white w-full max-w-md p-6 rounded-2xl shadow-lg text-center animate-fade-in-up",4,"ngIf"],[1,"bg-white","w-full","max-w-md","p-6","rounded-2xl","shadow-lg","text-center","animate-fade-in-up"],["name","arrow-back",1,"text-xl","text-gray-600","mb-2"],[1,"text-sm","font-semibold","text-gray-700"],[1,"text-lg","font-bold","mb-2"],[1,"flex","justify-center","mb-4"],["src","assets/images/cleaning-tools.png","alt","Cleaning Tools",1,"w-36","h-38","rounded-full","object-cover","border"],[1,"text-sm","text-gray-600"],[1,"text-blue-600","font-semibold","mt-2"],[1,"mt-6","flex","justify-center","space-x-1"],[1,"w-2","h-2","bg-blue-500","rounded-full","animate-bounce","[animation-delay:-0.3s]"],[1,"w-2","h-2","bg-blue-500","rounded-full","animate-bounce","[animation-delay:-0.15s]"],[1,"w-2","h-2","bg-blue-500","rounded-full","animate-bounce"],[1,"text-lg","font-bold","mb-4"],["alt","Cleaner",1,"mx-auto","w-36","h-36","rounded-full","object-cover","border-4","border-gray-200",3,"src"],[1,"text-lg","font-semibold","mt-4"],[1,"text-yellow-500","mt-1"],[1,"text-gray-500"],[1,"text-sm","text-gray-600","mt-4"],["expand","block","fill","solid","color","primary",1,"mt-6","w-full"]],template:function(o,m){o&1&&(c(0,"app-global-background"),e(1,"div",0),h(2,T,16,1,"div",1)(3,k,17,3,"div",1),n()),o&2&&(s(2),p("ngIf",!m.cleanerFound),s(),p("ngIf",m.cleanerFound))},dependencies:[I,M,_,w,y,E],styles:[".onboarding-page[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:20px}.onboarding-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:20px;padding:25px 20px;text-align:center;width:100%;max-width:350px;box-shadow:0 4px 12px #0000001a;position:relative}.onboarding-page[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{position:absolute;top:15px;left:15px;font-size:24px;color:#333}.onboarding-page[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2rem;margin-top:50px;font-weight:700}.onboarding-page[_ngcontent-%COMP%]   .center-image[_ngcontent-%COMP%], .onboarding-page[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{width:150px;height:150px;margin:20px auto;border-radius:50%;object-fit:cover}.onboarding-page[_ngcontent-%COMP%]   .profile-image[_ngcontent-%COMP%]{border:3px solid #eee}.onboarding-page[_ngcontent-%COMP%]   .subtext[_ngcontent-%COMP%]{font-size:.9rem;color:#666;margin-top:10px}.onboarding-page[_ngcontent-%COMP%]   .almost[_ngcontent-%COMP%]{font-weight:700;color:#007bff;margin-top:5px}.onboarding-page[_ngcontent-%COMP%]   .cleaner-name[_ngcontent-%COMP%]{font-weight:700;margin-top:10px}.onboarding-page[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{color:#fbb034;font-size:1rem}.onboarding-page[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]   .reviews[_ngcontent-%COMP%]{color:#666;font-size:.85rem}.onboarding-page[_ngcontent-%COMP%]   .proceed-button[_ngcontent-%COMP%]{margin-top:15px;--background: #007bff;--border-radius: 12px;--color: white;font-weight:700}"]});let r=l;return r})();export{J as FindCleanerPage};
