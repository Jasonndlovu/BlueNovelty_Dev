import{a as Z}from"./chunk-FYLT2MHV.js";import{a as X}from"./chunk-XWTMKH22.js";import"./chunk-L2HEO6U7.js";import{F as W}from"./chunk-JYJCGWMW.js";import{F as K,G as Q,i as V,j as J,k as q,l as L,m as H,n as $,o as U,q as z,t as G,z as Y}from"./chunk-RADV76JZ.js";import{Ja as j,L as h,La as P,M as v,V as r,Va as F,W as f,Wa as O,Y as A,Za as R,aa as u,ab as B,ea as p,ga as n,gb as M,ha as e,ia as S,ic as N,ma as E,na as b,oa as m,xa as t,ya as D,za as d}from"./chunk-KV6L2PIJ.js";import"./chunk-A2PWH3LV.js";import"./chunk-2ERDAVOU.js";import"./chunk-S2UWYFTU.js";import"./chunk-7DVLVN3P.js";import"./chunk-G3CV3VGG.js";import"./chunk-PXSONQDE.js";import"./chunk-MS5FDQK3.js";import"./chunk-GCVURZBX.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{g as w}from"./chunk-OLRFWS6T.js";function ee(o,a){if(o&1){let i=E();n(0,"div",4)(1,"div",5)(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title"),t(5,"Note:"),e(),n(6,"ion-card-subtitle"),t(7,"Service agreement"),e()(),n(8,"ion-card-content"),t(9," Once you \u201CAccept\u201D this booking request, you will be scheduled for the clean. If you cannot make it, \u201CDecline.\u201D If you accept and then can\u2019t make it, when you are scheduled, then go to your profile, click on \u201CUpcoming Clean\u201D and on \u201CI Cannot Make It.\u201D Make sure to notify us atleast 12 Hours before your clean, otherwise penalties will be enforced. Do not be late. Do not miss a spot. Respect your client and we wish you luck. "),e(),n(10,"ion-button",6),b("click",function(){h(i);let s=m();return v(s.nextStep())}),t(11,"Continue"),e()()()()}}function te(o,a){if(o&1&&(n(0,"li"),t(1),j(2,"date"),e()),o&2){let i=a.$implicit;r(),D(P(2,1,i,"fullDate"))}}function ie(o,a){if(o&1&&(n(0,"div",18)(1,"p")(2,"strong"),t(3,"Booking frequency:"),e(),t(4),e()()),o&2){let i=m(2);r(4),d(" ",i.bookingFrequency,"")}}function ne(o,a){if(o&1&&(n(0,"div",18)(1,"p")(2,"strong"),t(3,"Booking day of the month:"),e(),t(4),e()()),o&2){let i=m(2);r(4),d(" ",i.recurringDate,"th")}}function oe(o,a){if(o&1&&(n(0,"div",18)(1,"p")(2,"strong"),t(3,"Every:"),e(),t(4),e()()),o&2){let i=m(2);r(4),d(" ",i.recurringDay,"")}}function re(o,a){if(o&1&&(n(0,"li"),t(1),e()),o&2){let i=a.$implicit;r(),D(i)}}function ae(o,a){if(o&1&&(n(0,"div")(1,"h3",13),t(2,"Extras"),e(),n(3,"ul",19),u(4,re,2,1,"li",9),e()()),o&2){let i=m(2);r(4),p("ngForOf",i.jobItems)}}function ce(o,a){if(o&1){let i=E();n(0,"div",4)(1,"div",5)(2,"h2",7),t(3,"Details About Your Clean"),e(),n(4,"div",8)(5,"p")(6,"strong"),t(7,"Client Name:"),e(),t(8),e(),n(9,"p")(10,"strong"),t(11,"Service:"),e(),t(12),e(),n(13,"p")(14,"strong"),t(15,"Preferred Date:"),e()(),n(16,"ul"),u(17,te,3,4,"li",9),e(),n(18,"p")(19,"strong"),t(20,"Offered Rate:"),e(),t(21),e()(),n(22,"div",10)(23,"p")(24,"strong"),t(25,"Location:"),e(),t(26),e()(),n(27,"div",10)(28,"p")(29,"strong"),t(30,"Booking Type:"),e(),t(31),e()(),u(32,ie,5,1,"div",11)(33,ne,5,1,"div",11)(34,oe,5,1,"div",11),n(35,"div",10)(36,"p")(37,"strong"),t(38,"Scheduled Date:"),e(),t(39),e(),n(40,"p")(41,"strong"),t(42,"Scheduled Time:"),e(),t(43),e()(),u(44,ae,5,1,"div",12),n(45,"div")(46,"h3",13),t(47,"Additional Instructions"),e(),n(48,"p",14),t(49),e()(),n(50,"div",15)(51,"button",16),b("click",function(){h(i);let s=m();return v(s.confirmAcceptJob())}),t(52," Accept "),e(),n(53,"button",17),b("click",function(){h(i);let s=m();return v(s.backtoDash())}),t(54," Decline "),e()()()()}if(o&2){let i=m();r(8),d(" ",i.userName,""),r(4),d(" ",i.jobType,""),r(5),p("ngForOf",i.scheduledDates),r(4),d(" R",i.price,""),r(5),d(" ","Randpark, Randburg",""),r(5),d(" ",i.bookingType,""),r(),p("ngIf",i.bookingType==="Re-occurring"&&i.bookingFrequency),r(),p("ngIf",i.bookingType==="Re-occurring"&&i.recurringDate),r(),p("ngIf",i.bookingType==="Re-occurring"&&i.recurringDay),r(5),d(" ",i.scheduledDateOnly,""),r(4),d(" ",i.scheduledTimeOnly,""),r(),p("ngIf",i.jobItems==null?null:i.jobItems.length),r(5),d(" ",i.additionalInfo," ")}}var ye=(()=>{let a=class a{constructor(l,s,x){var k,C;this.router=l,this.availableJobsService=s,this.auth=x,this.step=1,this.user=null,this.scheduledDates=[],this.editMode=!1,this.role="user";let _=this.router.getCurrentNavigation(),c=(k=_==null?void 0:_.extras)==null?void 0:k.state;if(c){console.log(c);let T=c.toDo,g=c.scheduledDate;if(this.jobItems=T?T.split(",").map(I=>I.trim()):[],this.jobId=c.jobId,this.jobType=c.jobType,this.userId=c.userId,this.userName=c.userName,this.price=c.price,this.additionalInfo=c.additionalInfo,this.bookingType=c.jobBookingType,typeof g=="string"?this.scheduledDates=g.split(","):Array.isArray(g)?this.scheduledDates=g:this.scheduledDates=[],this.bookingFrequency=c.bookingFrequency,this.recurringDay=c.recurringDay,this.recurringDate=(C=c.recurringDate)==null?void 0:C.toString(),this.scheduledDates&&this.scheduledDates.length>0){let[I,y]=this.scheduledDates[0].split("T");this.scheduledDateOnly=I,this.scheduledTimeOnly=y==null?void 0:y.slice(0,5)}}}ngOnInit(){console.log(this.jobItems),this.auth.onAuthStateChanged(l=>w(this,null,function*(){this.user=l}))}confirmAcceptJob(){!this.jobId||!this.user||this.availableJobsService.updateJobStatus(this.jobId,this.user).then(()=>{console.log(`Job ${this.jobId} has been accepted.`),this.router.navigate(["/dashboard"])}).catch(l=>{console.error("Error updating job status:",l)})}backtoDash(){this.router.navigate(["/dashboard"])}nextStep(){this.step+=1}capitalizeFirstLetter(l){return l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()}};a.\u0275fac=function(s){return new(s||a)(f(M),f(Z),f(W))},a.\u0275cmp=A({type:a,selectors:[["app-accept-service"]],decls:10,vars:4,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["class","p-4",4,"ngIf"],[1,"p-4"],[1,"bg-white","rounded-2xl","shadow-md","p-6","space-y-6"],["fill","clear",3,"click"],[1,"text-center","text-xl","font-semibold","text-gray-800"],[1,"text-sm","text-gray-700","space-y-1"],[4,"ngFor","ngForOf"],[1,"text-sm","text-gray-700"],["class","text-sm text-red-700",4,"ngIf"],[4,"ngIf"],[1,"text-lg","font-semibold","text-gray-800"],[1,"text-sm","text-blue-700"],[1,"flex","gap-4"],[1,"w-full","bg-green-600","hover:bg-green-700","text-white","font-medium","py-3","rounded-lg","text-sm","shadow","transition",3,"click"],[1,"w-full","bg-red-600","hover:bg-red-700","text-white","font-medium","py-3","rounded-lg","text-sm","shadow","transition",3,"click"],[1,"text-sm","text-red-700"],[1,"list-disc","list-inside","text-sm","text-gray-700","space-y-1"]],template:function(s,x){s&1&&(n(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),S(3,"ion-menu-button"),e(),n(4,"ion-title"),t(5,"acceptService"),e()()(),n(6,"ion-content",2),S(7,"app-global-background"),u(8,ee,12,0,"div",3)(9,ce,55,13,"div",3),e()),s&2&&(p("translucent",!0),r(6),p("fullscreen",!0),r(2),p("ngIf",x.step===1),r(),p("ngIf",x.step===2))},dependencies:[L,$,U,H,q,V,J,z,G,K,Y,Q,B,F,O,R,N,X],encapsulation:2});let o=a;return o})();export{ye as AcceptServicePage};
